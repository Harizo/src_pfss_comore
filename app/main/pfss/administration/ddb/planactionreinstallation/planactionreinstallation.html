<div id="forms" class="page-layout simple fullwidth doc-page" layout="column">

    <!-- HEADER -->
    <div class="header md-accent-bg" layout="row" layout-align="space-between">
        <div layout="column" layout-align="space-between">
            <div class="breadcrumb" layout="row" layout-align="start center">
                <md-icon md-font-icon="icon-home" class="s16"></md-icon>
                <md-icon md-font-icon="icon-chevron-right" class="s16 separator"></md-icon>
                <span class="parent">Administration</span>
                <md-icon md-font-icon="icon-chevron-right" class="s16 separator"></md-icon>
                <span class="parent">Données de bases</span>

                <md-icon md-font-icon="icon-chevron-right" class="s16 separator"></md-icon>
                <span class="parent" href="javascript:;">Plan d'action réinstallation / Sous-projet</span>
            </div>

            <!--div class="title">Plan d'action réinstallation </div-->
        </div>
    </div>
    <!-- / HEADER -->    
    <!-- CONTENT -->
    <div class="content" layout="column">
		<div class="form-wrapper">
		<md-tabs md-dynamic-height layout="column" flex>
			<md-tab label="Plan d'action réinstallation">
				<md-tab-body>
					<div style="overflow: auto; width: 100%;">
					<fieldset layout="row" layout-gt-xs="row" >
						<legend>
							Plan d'action réinstallation
							<md-button class="md-fab md-mini " aria-label="Use Android" ng-if="vm.serveur_central" ng-click="vm.ajouterPlan_action_reinstallation()">
							  <md-icon md-svg-src="assets/icons/svg/add.svg" style="color: greenyellow;"></md-icon>
							</md-button>

							<md-button class="md-fab md-mini " aria-label="Use Android" ng-if="!vm.serveur_central" ng-click="vm.download_ddb_general('plan_action_reinstallation/index','plan_action_reinstallation')">
							  <md-icon md-svg-src="assets/icons/svg/down.svg" style="color: greenyellow;"></md-icon>
							</md-button>
						</legend>
						<div flex>
							<table ng-table="tablePlan_action_reinstallation" id="tablePlan_action_reinstallation" class="dataTable row-border hover" datatable="ng" dt-options="vm.dtOptions" ms-responsive-table flex>
								<thead>
									<tr>
										<th class="secondary-text" ng-repeat="c in ::vm.plan_action_reinstallation_column">
											<div class="table-header">
												<span class="column-title">{{c.titre}}</span>
											</div>
										</th>
									</tr>
								</thead>
								<tbody>
									<tr ng-repeat="plan_action_rea in vm.allPlan_action_reinstallation"  ng-class="{selected: plan_action_rea.$selected}" ng-click="vm.selectionPlan_action_reinstallation(plan_action_rea)">                                      
										
										<td style="width:15% !important;">
											<span ng-if="plan_action_rea.$edit">
												<md-input-container style="width:100% !important;">
													<label>Intitule</label>
													<input name="intitule" type="text" ng-model="plan_action_rea.intitule"/>
												</md-input-container>   
											</span>
											<span ng-if="!plan_action_rea.$edit">{{plan_action_rea.intitule}}</span>
										</td>
										<td style="width:35% !important;">
											<span ng-if="plan_action_rea.$edit">
												<md-input-container style="width:100% !important;">
													<label>SER</label>
													<input name="ser" type="text" ng-model="plan_action_rea.ser"/>
												</md-input-container>   
											</span>
											<span ng-if="!plan_action_rea.$edit">{{plan_action_rea.ser}}</span>
										</td>
										<td style="width:35% !important;">
											<span ng-if="plan_action_rea.$edit">											
												<md-datepicker ng-model="plan_action_rea.date_elaboration" md-placeholder="Date visa RES">                       
												</md-datepicker>   
											</span>
											<span ng-if="!plan_action_rea.$edit">{{vm.formatDate(plan_action_rea.date_elaboration)}}</span>
										</td>
										<td style="width:15% !important;">
											<a ng-if="!plan_action_rea.$edit" ng-click="vm.modifierPlan_action_reinstallation(plan_action_rea)" title="Modifier">
												<span class="icon-table-edit"></span>
											</a>
											<a ng-if="!plan_action_rea.$edit" ng-click="vm.supprimerPlan_action_reinstallation(plan_action_rea)" title="Supprimer">
												<span class="icon-delete"></span>
											</a>
											<a ng-if="plan_action_rea.$edit" ng-click="vm.annulerPlan_action_reinstallation(plan_action_rea)" title="Annuler modification">
												<span class="icon-cancel"></span>
											</a>
											<a ng-if="plan_action_rea.$edit && plan_action_rea.intitule && plan_action_rea.ser && plan_action_rea.date_elaboration" ng-click="vm.ajoutPlan_action_reinstallation(plan_action_rea,0)" title="Sauvegarder">
												<span class="icon-content-save"></span>
											</a>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
						
					</fieldset>
						
				</div>
				</md-tab-body>
			</md-tab>
			<md-tab label="Activites PAR" ng-disabled="!vm.show_tab_activite_par" ng-click="vm.vm.click_activite_par()">
				<md-tab-body>
					<div style="overflow: auto; width: 100%;">
					<fieldset layout="row" layout-gt-xs="row" >
						<legend>
							Activites PAR
							<md-button class="md-fab md-mini " aria-label="Use Android" ng-if="vm.serveur_central" ng-click="vm.ajouterActivite_par()">
							  <md-icon md-svg-src="assets/icons/svg/add.svg" style="color: greenyellow;"></md-icon>
							</md-button>

							<md-button class="md-fab md-mini " aria-label="Use Android" ng-if="!vm.serveur_central" ng-click="vm.download_ddb_general('activite_par/index','activite_par')">
							  <md-icon md-svg-src="assets/icons/svg/down.svg" style="color: greenyellow;"></md-icon>
							</md-button>
						</legend>
						<div flex>
							<table ng-table="tableActivite_par" id="tableActivite_par" class="dataTable row-border hover" datatable="ng" dt-options="vm.dtOptions" ms-responsive-table flex>
								<thead>
									<tr>
										<th class="secondary-text" ng-repeat="c in ::vm.activite_par_column">
											<div class="table-header">
												<span class="column-title">{{c.titre}}</span>
											</div>
										</th>
									</tr>
								</thead>
								<tbody>
									<tr ng-repeat="activi in vm.allActivite_par"  ng-class="{selected: activi.$selected}" ng-click="vm.selectionActivite_par(activi)">                                      
										
										<td style="width:15% !important;">
											<span ng-if="activi.$edit">
												<md-input-container style="width:100% !important;">
													<label>Activite</label>
													<input name="activite" type="text" ng-model="activi.activite"/>
												</md-input-container>   
											</span>
											<span ng-if="!activi.$edit">{{activi.activite}}</span>
										</td>
										<td style="width:35% !important;">
											<span ng-if="activi.$edit">
												<md-input-container style="width:100% !important;">
													<label>Nombre menage</label>
													<input name="nbr_menage" type="number" ng-model="activi.nbr_menage"/>
												</md-input-container>   
											</span>
											<span ng-if="!activi.$edit">{{activi.nbr_menage}}</span>
										</td>
										<td style="width:15% !important;">
											<span ng-if="activi.$edit">
												<md-input-container style="width:100% !important;">
													<label>Bien/ressource</label>
													<input name="bien_ressource" type="text" ng-model="activi.bien_ressource"/>
												</md-input-container>   
											</span>
											<span ng-if="!activi.$edit">{{activi.bien_ressource}}</span>
										</td>
										<td style="width:15% !important;">
											<span ng-if="activi.$edit">
												<md-input-container style="width:100% !important;">
													<label>Mesure compensatoire</label>
													<input name="mesure_compensatoire" type="text" ng-model="activi.mesure_compensatoire"/>
												</md-input-container>   
											</span>
											<span ng-if="!activi.$edit">{{activi.mesure_compensatoire}}</span>
										</td>
										<td style="width:15% !important;">
											<span ng-if="activi.$edit">
												<md-input-container style="width:100% !important;">
													<label>Responsable</label>
													<input name="responsable" type="text" ng-model="activi.responsable"/>
												</md-input-container>   
											</span>
											<span ng-if="!activi.$edit">{{activi.responsable}}</span>
										</td>
										
										<td style="width:15% !important;">
											<span ng-if="activi.$edit">
												<md-input-container style="width:100% !important;">
													<label>Calendrierd'execution</label>
													<input name="calendrier_execution" type="text" ng-model="activi.calendrier_execution"/>
												</md-input-container>   
											</span>
											<span ng-if="!activi.$edit">{{activi.calendrier_execution}}</span>
										</td>
										
										<td style="width:15% !important;">
											<span ng-if="activi.$edit">
												<md-input-container style="width:100% !important;">
													<label>coût estimatif</label>
													<input name="cout_estimatif" type="number" ng-model="activi.cout_estimatif"/>
												</md-input-container>   
											</span>
											<span ng-if="!activi.$edit">{{activi.cout_estimatif}}</span>
										</td>
										<td style="width:15% !important;">
											<a ng-if="!activi.$edit" ng-click="vm.modifierActivite_par(activi)" title="Modifier">
												<span class="icon-table-edit"></span>
											</a>
											<a ng-if="!activi.$edit" ng-click="vm.supprimerActivite_par(activi)" title="Supprimer">
												<span class="icon-delete"></span>
											</a>
											<a ng-if="activi.$edit" ng-click="vm.annulerActivite_par(activi)" title="Annuler modification">
												<span class="icon-cancel"></span>
											</a>
											<a ng-if="activi.$edit && activi.activite && activi.nbr_menage && activi.bien_ressource &&
											 activi.mesure_compensatoire && activi.responsable && activi.calendrier_execution && activi.cout_estimatif" ng-click="vm.ajoutActivite_par(activi,0)" title="Sauvegarder">
												<span class="icon-content-save"></span>
											</a>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
						
					</fieldset>
						
				</div>
				</md-tab-body>
			</md-tab>
			<md-tab label="Sous-projet" ng-click="vm.click_tab_sousprojet()" ng-disabled="!vm.show_tab_activite_par">
				<md-tab-body>
					<div style="overflow: auto; width: 100%;">
						<fieldset layout="column" layout-gt-xs="row">
							<legend>
									Sous-projet
								<md-button class="md-fab md-mini " aria-label="Use Android" ng-if="vm.serveur_central" ng-click="vm.ajouterSous_projet()">
								  <md-icon md-svg-src="assets/icons/svg/add.svg" style="color: greenyellow;"></md-icon>
								</md-button>
	
								<md-button class="md-fab md-mini " aria-label="Use Android" ng-if="!vm.serveur_central" ng-click="vm.download_ddb('sous_projet/index','sous_projet')">
								  <md-icon md-svg-src="assets/icons/svg/down.svg" style="color: greenyellow;"></md-icon>
								</md-button>
							</legend>
							<div flex>
								<table ng-table="tableSousProjet" id="tableSousProjet" class="dataTable row-border hover" datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
									<thead>
										<tr>
											<th class="secondary-text" ng-repeat="c in ::vm.sous_projet_column">
												<div class="table-header">
													<span class="column-title">{{c.titre}}</span>
												</div>
											</th>
										</tr>
									</thead>
									<tbody>
										<tr ng-repeat="ss_p in vm.allRecordsSous_projet"  ng-class="{selected: ss_p.$selected}" ng-click="vm.selectionSous_projet(ss_p)">                                       
											
											
											
											<td >
												<span ng-if="ss_p.$edit">
													<md-input-container style="width:100% !important; display: flex !important;">
														<label>Code</label>
														<input name="code" type="text" ng-model="ss_p.code"/>
													</md-input-container>   
												</span>
												<span ng-if="!ss_p.$edit">{{ss_p.code}}</span>
											</td>
											<td >
												<span ng-if="ss_p.$edit">
													<md-input-container style="width:100%;">
													  <label>Type</label>
														<md-select ng-model="ss_p.type"  style="width:90px;overflow: hidden;text-overflow: ellipsis;" ng-change="vm.modifierType(ss_p)">
															<md-option value='ACT'>ACT</md-option>
															<md-option value='ARSE'>ARSE</md-option>
															<md-option value='COVID-19'>COVID-19</md-option>
														  <md-option value="IDB">IDB</md-option>
														</md-select>
													</md-input-container>  
												</span>
												<span ng-if="!ss_p.$edit">{{ss_p.type}}</span>
											</td>
											<td >
												<span ng-if="ss_p.$edit">
													<md-input-container style="width:100% !important; display: flex !important;">
														<label>Description sous projet</label>
														<input name="description" type="text" ng-model="ss_p.description"/>
													</md-input-container>   
												</span>
												<span ng-if="!ss_p.$edit">{{ss_p.description}}</span>
											</td>
											<td >
												<span ng-if="ss_p.$edit">
													<md-input-container style="width:100% !important; display: flex !important;">
														<label>Montant</label>
														<input name="montant" type="number" ng-model="ss_p.montant"/>
													</md-input-container>   
												</span>
												<span ng-if="!ss_p.$edit">{{ss_p.montant}}</span>
											</td>
											<td >
												<span ng-if="ss_p.$edit">
													<md-input-container style="width:100% !important; display: flex !important;">
														<label>Objectif</label>
														<input name="objectif" type="text" ng-model="ss_p.objectif"/>
													</md-input-container>   
												</span>
												<span ng-if="!ss_p.$edit">{{ss_p.objectif}}</span>
											</td>
											<td >
												<span ng-if="ss_p.$edit">
													<md-input-container style="width:100% !important; display: flex !important;">
														<label>Durée</label>
														<input name="duree" type="number" ng-model="ss_p.duree"/>
													</md-input-container>   
												</span>
												<span ng-if="!ss_p.$edit">{{ss_p.duree}} <span ng-if="ss_p.duree">Jours</span></span>
											</td>
											
											<td >
												<span ng-if="ss_p.$edit">
													<md-input-container style="width:100% !important; display: flex !important;">
														<label>Nature</label>
														<input name="nature" type="text" ng-model="ss_p.nature"/>
													</md-input-container>   
												</span>
												<span ng-if="!ss_p.$edit">{{ss_p.nature}}</span>
											</td>
											
											<td style="width:15% !important;">
												<a ng-if="!ss_p.$edit" ng-click="vm.modifierSous_projet(ss_p)" title="Modifier">
													<span class="icon-table-edit"></span>
												</a>
												<!--a ng-if="!ss_p.$edit" ng-click="vm.supprimerSous_projet(ss_p)" title="Supprimer">
													<span class="icon-delete"></span>
												</a-->
												<a ng-if="ss_p.$edit" ng-click="vm.annulerSous_projet(ss_p)" title="Annuler modification">
													<span class="icon-cancel"></span>
												</a>
												<a ng-if="ss_p.$edit && ss_p.code && ss_p.type && ss_p.description && ss_p.objectif && ss_p.duree && ss_p.montant" ng-click="vm.ajoutSous_projet(ss_p,0)" title="Sauvegarder">
													<span class="icon-content-save"></span>
												</a>
											</td>
										</tr>
									</tbody>
								</table>
							</div>
							
						</fieldset>
					</div>
					
				</md-tab-body>
			</md-tab>
			
			<md-tab label="Sous-projet-localisation" ng-click="vm.click_tab_sousprojet_localisation()" ng-disabled="!vm.show_tab_sous_localisation">
				<md-tab-body>
					<div style="overflow: auto; width: 100%;">
						<fieldset layout="column" layout-gt-xs="row">
							<legend>
									Sous-projet-localisation
								<md-button class="md-fab md-mini " aria-label="Use Android" ng-if="vm.serveur_central" ng-click="vm.ajouterSous_projet_localisation()">
								  <md-icon md-svg-src="assets/icons/svg/add.svg" style="color: greenyellow;"></md-icon>
								</md-button>
	
								<!--md-button class="md-fab md-mini " aria-label="Use Android" ng-if="!vm.serveur_central" ng-click="vm.download_ddb('sous_projet/index','sous_projet')">
								  <md-icon md-svg-src="assets/icons/svg/down.svg" style="color: greenyellow;"></md-icon>
								</md-button-->
							</legend>
							<div flex>
								<table ng-table="tableSousProjet_localisation" id="tableSousProjet_localisation" class="dataTable row-border hover" datatable="ng" dt-options="vm.dtOptions">
									<thead>
										<tr>
											<!--th class="secondary-text" ng-repeat="c in ::vm.sous_projet_localisation_column">
												<div class="table-header">
													<span class="column-title">{{c.titre}}</span>
												</div>
											</th-->
											<th class="secondary-text">
												<div class="table-header">
													<span class="column-title">Ile</span>
												</div>
											</th>
											<th class="secondary-text">
												<div class="table-header">
													<span class="column-title">Préfecture</span>
												</div>
											</th>
											<th class="secondary-text">
												<div class="table-header">
													<span class="column-title">Commune</span>
												</div>
											</th>
											<th class="secondary-text">
												<div class="table-header">
													<span class="column-title">Village</span>
												</div>
											</th>
											<th class="secondary-text">
												<div class="table-header">
													<span class="column-title">Zip</span>
												</div>
											</th>
											<th class="secondary-text">
												<div class="table-header">
													<span class="column-title">Vague</span>
												</div>
											</th>											
											<th class="secondary-text">
												<div class="table-header">
													<span class="column-title">Presentantion communauté</span>
												</div>
											</th>
											<!--th class="secondary-text" ng-show="vm.type_sous_projet=='ACT' || vm.type_sous_projet=='ARSE' || vm.type_sous_projet=='COVID-19'">
												<div class="table-header">
													<span class="column-title">Village</span>
												</div>
											</th>
											<th class="secondary-text" ng-show="vm.type_sous_projet=='IDB'">
												<div class="table-header">
													<span class="column-title">Communaute</span>
												</div>
											</th>
											<th class="secondary-text" ng-show="vm.type_sous_projet=='IDB'">
												<div class="table-header">
													<span class="column-title">Presentantion communauté</span>
												</div>
											</th-->
											<th class="secondary-text">
												<div class="table-header">
													<span class="column-title">Référence DGSC</span>
												</div>
											</th>
											<th class="secondary-text">
												<div class="table-header">
													<span class="column-title">Nombre menage bénéficiaire prévu</span>
												</div>
											</th>
											<th class="secondary-text" ng-show="vm.type_sous_projet=='ACT'">
												<div class="table-header">
													<span class="column-title">Nombre menage participant ACT</span>
												</div>
											</th>
											<th class="secondary-text" ng-show="vm.type_sous_projet=='ACT'">
												<div class="table-header">
													<span class="column-title">Nombre menage non participant ACT</span>
												</div>
											</th>
											<th class="secondary-text">
												<div class="table-header">
													<span class="column-title">Population total de la communauté</span>
												</div>
											</th>
											<!--th class="secondary-text" ng-show="vm.type_sous_projet=='IDB'">
												<div class="table-header">
													<span class="column-title">Population total de la communauté</span>
												</div>
											</th-->
											<th class="secondary-text">
												<div class="table-header">
													<span class="column-title">Action</span>
												</div>
											</th>
										</tr>
									</thead>
									<tbody>
										<tr ng-repeat="ss_p_l in vm.allSous_projet_localisation"  ng-class="{selected: ss_p_l.$selected}" ng-click="vm.selectionSous_projet_localisation(ss_p_l)">                                       
											
                                            
											<td>
												<span ng-if="ss_p_l.$edit">
													<md-input-container style="width:100%; display: flex !important;">
													  <label>Ile</label>
														<md-select ng-model="ss_p_l.id_ile"  style="width:90px;overflow: hidden;text-overflow: ellipsis;" ng-change="vm.modifierIle(ss_p_l)">
														
														  <md-option ng-repeat="il in vm.allIle" value="{{il.id}}">
															{{il.Ile}}
														  </md-option>
														</md-select>
													</md-input-container>  
												</span>
												<span ng-if="!ss_p_l.$edit">{{ss_p_l.ile.Ile}}</span>
											</td>
											<td>
												<span ng-if="ss_p_l.$edit">
													<md-input-container style="width:100%; display: flex !important;">
													  <label>Region</label>
														<md-select ng-model="ss_p_l.id_region"  style="width:90px;overflow: hidden;text-overflow: ellipsis;" ng-change="vm.modifierRegion(ss_p_l)" ng-disabled="!ss_p_l.id_ile">
														
														  <md-option ng-repeat="il in vm.allRegion" value="{{il.id}}">
															{{il.Region}}
														  </md-option>
														</md-select>
													</md-input-container>  
												</span>
												<span ng-if="!ss_p_l.$edit">{{ss_p_l.region.Region}}</span>
											</td>
											<td>
												<span ng-if="ss_p_l.$edit">
													<md-input-container style="width:100%; display: flex !important;">
													  <label>Commune</label>
														<md-select ng-model="ss_p_l.id_commune"  style="width:90px;overflow: hidden;text-overflow: ellipsis;" ng-change="vm.modifierCommune(ss_p_l)" ng-disabled="!ss_p_l.id_region">
														
														  <md-option ng-repeat="comu in vm.allCommune" value="{{comu.id}}">
															{{comu.Commune}}
														  </md-option>
														</md-select>
													</md-input-container>  
												</span>
												<span ng-if="!ss_p_l.$edit">{{ss_p_l.commune.Commune}}</span>
											</td>
											<!--td ng-show="vm.type_sous_projet=='ACT' || vm.type_sous_projet=='ARSE' || vm.type_sous_projet=='COVID-19'">
												<span ng-if="ss_p_l.$edit">
													<md-input-container style="width:100%; display: flex !important;" ng-if="vm.type_sous_projet=='ACT' || vm.type_sous_projet=='ARSE' || vm.type_sous_projet=='COVID-19'">
													  <label>Village</label>
														<md-select ng-model="ss_p_l.id_village"  style="width:90px;overflow: hidden;text-overflow: ellipsis;" ng-disabled="!ss_p_l.id_commune">
															<md-option value=''>&nbsp;</md-option>
														  <md-option ng-repeat="vil in vm.allVillage" value="{{vil.id}}">
															{{vil.Village}}
														  </md-option>
														</md-select>
													</md-input-container>  
												</span>
												<span ng-if="!ss_p_l.$edit">{{ss_p_l.village.Village}}</span>
											</td>
											<td ng-show="vm.type_sous_projet=='IDB'">
												<span ng-if="ss_p_l.$edit">
													<md-input-container style="width:100%; display: flex !important;" ng-if="vm.type_sous_projet=='IDB'">
													  <label>Communaute</label>
														<md-select ng-model="ss_p_l.id_communaute"  style="width:90px;overflow: hidden;text-overflow: ellipsis;" ng-disabled="!ss_p_l.id_commune">
															<md-option value=''>&nbsp;</md-option>
														  <md-option ng-repeat="com in vm.allCommunaute" value="{{com.id}}">
															{{com.libelle}}
														  </md-option>
														</md-select>
													</md-input-container>  
												</span>
												<span ng-if="!ss_p_l.$edit">{{ss_p_l.communaute.libelle}}</span>
											</td>
											<td ng-show="vm.type_sous_projet=='IDB'">
												<span ng-if="ss_p_l.$edit" >
													<md-input-container style="width:100% !important; display: flex !important;">
														<label>Presentantion communauté</label>
														<input name="presentantion_communaute" type="text" ng-model="ss_p_l.presentantion_communaute"/>
													</md-input-container>   
												</span>
												<span ng-if="!ss_p_l.$edit">{{ss_p_l.presentantion_communaute}}</span>
											</td-->
											
											<td>
												<span ng-if="ss_p_l.$edit">
													<md-input-container style="width:100%; display: flex !important;">
													  <label>Village</label>
														<md-select ng-model="ss_p_l.id_village"  style="width:90px;overflow: hidden;text-overflow: ellipsis;" ng-disabled="!ss_p_l.id_commune" ng-change="vm.modifierVillage(ss_p_l)">
															<md-option value=''>&nbsp;</md-option>
														  <md-option ng-repeat="vil in vm.allVillage" value="{{vil.id}}">
															{{vil.Village}}
														  </md-option>
														</md-select>
													</md-input-container>  
												</span>
												<span ng-if="!ss_p_l.$edit">{{ss_p_l.village.Village}}</span>
											</td>
											<td>
												<span ng-if="ss_p_l.$edit">
													<md-input-container style="width:100%; display: flex !important;">
													  <label>Zip</label>
														<md-select ng-model="ss_p_l.id_zip"  style="width:90px;overflow: hidden;text-overflow: ellipsis;" disabled>
															<md-option value=''>&nbsp;</md-option>
														  <md-option ng-repeat="zi in vm.allZip" value="{{zi.id}}">
															{{zi.libelle}}
														  </md-option>
														</md-select>
													</md-input-container>  
												</span>
												<span ng-if="!ss_p_l.$edit">{{ss_p_l.zip.libelle}}</span>
											</td>
											
											<td>
												<span ng-if="ss_p_l.$edit" >
													<md-input-container style="width:100% !important; display: flex !important;">
														<label>Vague</label>
														<input name="vague" type="text" ng-model="ss_p_l.vague" disabled/>
													</md-input-container>   
												</span>
												<span ng-if="!ss_p_l.$edit">{{ss_p_l.village.vague}}</span>
											</td>
											
											<td>
												<span ng-if="ss_p_l.$edit" >
													<md-input-container style="width:100% !important; display: flex !important;">
														<label>Presentantion communauté</label>
														<input name="presentantion_communaute" type="text" ng-model="ss_p_l.presentantion_communaute"/>
													</md-input-container>   
												</span>
												<span ng-if="!ss_p_l.$edit">{{ss_p_l.presentantion_communaute}}</span>
											</td>
											<td>
												<span ng-if="ss_p_l.$edit">
													<md-input-container style="width:100% !important; display: flex !important;">
														<label>Référence DGSC</label>
														<input name="ref_dgsc" type="text" ng-model="ss_p_l.ref_dgsc"/>
													</md-input-container>   
												</span>
												<span ng-if="!ss_p_l.$edit">{{ss_p_l.ref_dgsc}}</span>
											</td>
											<td>
												<span ng-if="ss_p_l.$edit">
													<md-input-container style="width:100% !important; display: flex !important;">
														<label>Nombre menage béneficiaire</label>
														<input name="nbr_menage_beneficiaire" type="number" ng-model="ss_p_l.nbr_menage_beneficiaire"/>
													</md-input-container>   
												</span>
												<span ng-if="!ss_p_l.$edit">{{ss_p_l.nbr_menage_beneficiaire}}</span>
											</td>
											<td ng-show="vm.type_sous_projet=='ACT'">
												<span ng-if="ss_p_l.$edit">
													<md-input-container style="width:100% !important; display: flex !important;">
														<label>Nombre menage participant</label>
														<input name="nbr_menage_participant" type="number" ng-model="ss_p_l.nbr_menage_participant" ng-change="vm.modifierNbr_menage_participant(ss_p_l)"/>
													</md-input-container>   
												</span>
												<span ng-if="!ss_p_l.$edit">{{ss_p_l.nbr_menage_participant}}</span>
											</td>
											<td ng-show="vm.type_sous_projet=='ACT'">
												<span ng-if="ss_p_l.$edit">
													<md-input-container style="width:100% !important; display: flex !important;">
														<label>Nombre menage non participant</label>
														<input name="nbr_menage_nonparticipant" type="number" ng-model="ss_p_l.nbr_menage_nonparticipant" ng-change="vm.modifierNbr_menage_nonparticipant(ss_p_l)"/>
													</md-input-container>   
												</span>
												<span ng-if="!ss_p_l.$edit">{{ss_p_l.nbr_menage_nonparticipant}}</span>
											</td>
											<td>
												<span ng-if="ss_p_l.$edit">
													<md-input-container style="width:100% !important; display: flex !important;">
														<label>Population total</label>
														<input name="population_total" type="number" ng-model="ss_p_l.population_total"/>
													</md-input-container>   
												</span>
												<span ng-if="!ss_p_l.$edit">{{ss_p_l.population_total}}</span>
											</td>
											<!--td ng-show="vm.type_sous_projet=='IDB'">
												<span ng-if="ss_p_l.$edit">
													<md-input-container style="width:100% !important; display: flex !important;">
														<label>Population total</label>
														<input name="population_total" type="number" ng-model="ss_p_l.population_total"/>
													</md-input-container>   
												</span>
												<span ng-if="!ss_p_l.$edit">{{ss_p_l.population_total}}</span>
											</td-->
											<td style="width:15% !important;" ng-if="vm.type_sous_projet=='ACT'">
												<a ng-if="!ss_p_l.$edit" ng-click="vm.modifierSous_projet_localisation(ss_p_l)" title="Modifier">
													<span class="icon-table-edit"></span>
												</a>
												<a ng-if="!ss_p_l.$edit" ng-click="vm.supprimerSous_projet_localisation(ss_p_l)" title="Supprimer">
													<span class="icon-delete"></span>
												</a>
												<a ng-if="ss_p_l.$edit" ng-click="vm.annulerSous_projet_localisation(ss_p_l)" title="Annuler modification">
													<span class="icon-cancel"></span>
												</a>
												<a ng-if="ss_p_l.$edit && ss_p_l.ref_dgsc && ss_p_l.nbr_menage_beneficiaire && ss_p_l.nbr_menage_participant && ss_p_l.nbr_menage_nonparticipant 
												 && ss_p_l.id_ile && ss_p_l.id_region  && ss_p_l.id_commune && ss_p_l.id_village" ng-click="vm.ajoutSous_projet_localisation(ss_p_l,0)" title="Sauvegarder">
													<span class="icon-content-save"></span>
												</a>
											</td>
											<td style="width:15% !important;" ng-if="vm.type_sous_projet!='ACT'">
												<a ng-if="!ss_p_l.$edit" ng-click="vm.modifierSous_projet_localisation(ss_p_l)" title="Modifier">
													<span class="icon-table-edit"></span>
												</a>
												<a ng-if="!ss_p_l.$edit" ng-click="vm.supprimerSous_projet_localisation(ss_p_l)" title="Supprimer">
													<span class="icon-delete"></span>
												</a>
												<a ng-if="ss_p_l.$edit" ng-click="vm.annulerSous_projet_localisation(ss_p_l)" title="Annuler modification">
													<span class="icon-cancel"></span>
												</a>
												<a ng-if="ss_p_l.$edit && ss_p_l.ref_dgsc && ss_p_l.nbr_menage_beneficiaire && ss_p_l.id_ile && ss_p_l.id_region && ss_p_l.id_commune  && ss_p_l.id_village && ss_p_l.population_total" ng-click="vm.ajoutSous_projet_localisation(ss_p_l,0)" title="Sauvegarder">
													<span class="icon-content-save"></span>
												</a>
											</td>
											<!--td style="width:15% !important;" ng-if="vm.type_sous_projet=='COVID-19'">
												<a ng-if="!ss_p_l.$edit" ng-click="vm.modifierSous_projet_localisation(ss_p_l)" title="Modifier">
													<span class="icon-table-edit"></span>
												</a>
												<a ng-if="!ss_p_l.$edit" ng-click="vm.supprimerSous_projet_localisation(ss_p_l)" title="Supprimer">
													<span class="icon-delete"></span>
												</a>
												<a ng-if="ss_p_l.$edit" ng-click="vm.annulerSous_projet_localisation(ss_p_l)" title="Annuler modification">
													<span class="icon-cancel"></span>
												</a>
												<a ng-if="ss_p_l.$edit && ss_p_l.ref_dgsc && ss_p_l.nbr_menage_beneficiaire && ss_p_l.id_ile && ss_p_l.id_region && ss_p_l.id_commune  && ss_p_l.id_village" ng-click="vm.ajoutSous_projet_localisation(ss_p_l,0)" title="Sauvegarder">
													<span class="icon-content-save"></span>
												</a>
											</td>
											<td style="width:15% !important;" ng-if="vm.type_sous_projet=='IDB'">
												<a ng-if="!ss_p_l.$edit" ng-click="vm.modifierSous_projet_localisation(ss_p_l)" title="Modifier">
													<span class="icon-table-edit"></span>
												</a>
												<a ng-if="!ss_p_l.$edit" ng-click="vm.supprimerSous_projet_localisation(ss_p_l)" title="Supprimer">
													<span class="icon-delete"></span>
												</a>
												<a ng-if="ss_p_l.$edit" ng-click="vm.annulerSous_projet_localisation(ss_p_l)" title="Annuler modification">
													<span class="icon-cancel"></span>
												</a>
												<a ng-if="ss_p_l.$edit && ss_p_l.presentantion_communaute && ss_p_l.ref_dgsc && ss_p_l.nbr_menage_beneficiaire 
												&& ss_p_l.population_total && ss_p_l.id_ile && ss_p_l.id_region && ss_p_l.id_commune && ss_p_l.id_communaute" ng-click="vm.ajoutSous_projet_localisation(ss_p_l,0)" title="Sauvegarder">
													<span class="icon-content-save"></span>
												</a>
											</td-->
										</tr>
									</tbody>
								</table>
							</div>
							
						</fieldset>
					</div>
					
				</md-tab-body>
			</md-tab>
			<md-tab label="Détail sous-projet" ng-click="vm.click_detail_sousprojet()" ng-disabled="!vm.detail_sousprojet || vm.type_sous_projet!='IDB'">
				<md-tab-body>
					<div class="content" layout="column">
						<div class="form-wrapper md-whiteframe-1dp" >
							<div style="clear:both;"></div>
							<div class="page-layout carded left-sidenav" layout="row">
			
								<!-- TOP BACKGROUND -->
								<div class="top-bg md-accent-bg">
								</div>
								<!-- / TOP BACKGROUND -->
							
								<!-- SIDENAV -->
								<md-sidenav class="sidenav" md-is-locked-open="$mdMedia('gt-md')" md-component-id="sidenav" ms-scroll
											ms-sidenav-helper >
							
									<!-- SIDENAV HEADER -->
									<div class="header">
									</div>
									<!-- / SIDENAV HEADER -->
							
									<!-- SIDENAV CONTENT -->
									<md-content class="content" flex ms-scroll style=" min-width: 250px !important; max-width: 250px !important;">
							
										<!-- DEMO SIDENAV -->
										<!--div ng-include="'app/main/ui/page-layouts/demo/demo-sidenav.html'"></div-->
										<div class="demo-sidenav" >
											<md-list style="overflow-y: scroll; max-height: calc(100vh - 4em - 164px) !important;">
												<!--md-subheader class="md-no-sticky">Item</md-subheader-->
												
												<md-list-item ng-repeat="item in vm.allitem_detail_sousprojet" ng-class="{selected: item.$selected}" ng-click="vm.selectionItem_detail_sousprojet(item)">
													<p>{{item.nom}}</p>
										
													<md-divider></md-divider>
												</md-list-item>
										
												<md-divider></md-divider>
										
											</md-list>
										</div>
										<!-- / DEMO SIDENAV -->
							
									</md-content>
									<!-- / SIDENAV CONTENT -->
							
								</md-sidenav>
								<!-- / SIDENAV -->
							
								<!-- CENTER -->
								<div class="center" layout="column" flex style="min-height: 600px !important;">
							
									<!-- CONTENT HEADER -->
									<div class="header" layout="row">
										<!--div>
											<span class="h2 white-fg">Left sidenav with independent scroll</span>
										</div-->
									</div>
									<!-- / CONTENT HEADER -->
							
									<!-- CONTENT CARD -->
									<div class="content-card" layout="column" flex>
							
										<!-- CONTENT TOOLBAR -->
										<div class="toolbar" layout="row" layout-align="start center">
											<md-button class="md-icon-button sidenav-toggle" ng-click="vm.toggleSidenav('sidenav')" hide-gt-md
													   aria-label="Toggle left sidenav">
												<md-icon md-font-icon="icon-menu" class="icon"></md-icon>
											</md-button>
							
											<p style="font-weight:bold">{{vm.titre_contenu}}</p>
										</div>
										<!-- / CONTENT TOOLBAR -->
							
										<!-- CONTENT -->
										<md-content class="content" flex ms-scroll>
							
											<!-- DEMO CONTENT -->
											<!--div ng-include="'app/main/ui/page-layouts/demo/demo-content.html'"></div-->
											<!-- / DEMO CONTENT -->
											<div ng-show="vm.selected_itemdetail_sousprojet.id==1">                                    
												<kendo-grid k-options="vm.mainGridOptionstravaux">
												</kendo-grid>
											</div>
											
											<div ng-show="vm.selected_itemdetail_sousprojet.id==2">                                    
												<kendo-grid options="vm.mainGridOptionsO_Materiaux">
												</kendo-grid>
											</div>
											
											<div ng-show="vm.selected_itemdetail_sousprojet.id==3">                                    
												<kendo-grid options="vm.mainGridOptionsMain_renume">
												</kendo-grid>
											</div>
											
											<div ng-show="vm.selected_itemdetail_sousprojet.id==4">                                    
												<kendo-grid options="vm.mainGridOptionsPlanning">
													<div k-detail-template>
														<kendo-grid k-options="vm.allsousprojetplanning_activite({{dataItem.id}})">
														</kendo-grid>
														</div>
												</kendo-grid>
											</div>
											
											<div ng-show="vm.selected_itemdetail_sousprojet.id==5">                                    
												<kendo-grid options="vm.mainGridOptionsDepenses">
												</kendo-grid>
											</div>
											
											<div ng-show="vm.selected_itemdetail_sousprojet.id==6">                                    
												<kendo-grid options="vm.mainGridOptionsIndicateurs">
												</kendo-grid>
											</div>
											
											<div ng-show="vm.selected_itemdetail_sousprojet.id==7">                                    
												<kendo-grid options="vm.mainGridOptionsResultats">
												</kendo-grid>
											</div>
											
											<div ng-show="vm.selected_itemdetail_sousprojet.id==8">                                    
												<kendo-grid options="vm.mainGridOptionsSauvegarde_env">
												</kendo-grid>
											</div>
											<!--/ Type infrastructure--> 
							
										</md-content>
										<!-- / CONTENT -->
							
									</div>
									<!-- / CONTENT CARD -->
							
								</div>
								<!-- / CENTER -->
							
							</div>
							<!--Type infrastructure  -->
							<!--kendo-grid options="vm.mainGridOptions">
								<div k-detail-template>
								<kendo-grid k-options="vm.allinfrastructure({{dataItem.id}})">
								</kendo-grid>
								</div>
							</kendo-grid-->
							<!--/ Type infrastructure--> 
						</div>
					</div>
				</md-tab-body>
			</md-tab>
			
			<md-tab label="Sauvegarde environnementale " ng-click="vm.click_sauvegarde_env()" ng-disabled="!vm.detail_sousprojet || vm.type_sous_projet!='IDB'">
				<md-tab-body>
					<div class="form-wrapper md-whiteframe-1dp" >
						<kendo-grid options="vm.mainGridOptionsSauvegarde_env">
						</kendo-grid>
					</div>
				</md-tab-body>
			</md-tab>
			
			<md-tab label="Filtration environnementale " ng-click="vm.click_filtration_env()" ng-disabled="!vm.detail_sousprojet || vm.type_sous_projet=='COVID-19'">
				<md-tab-body>
					<div style="overflow: auto; width: 100%;">
					<fieldset layout="row" layout-gt-xs="row" >
						<legend>
								Filtration environnementale
							<md-button class="md-fab md-mini " aria-label="Use Android" ng-if="vm.serveur_central" ng-click="vm.ajouterFiltration_env()">
							  <md-icon md-svg-src="assets/icons/svg/add.svg" style="color: greenyellow;"></md-icon>
							</md-button>

							<!--md-button class="md-fab md-mini " aria-label="Use Android" ng-if="!vm.serveur_central" ng-click="vm.download_ddb_general('filtration_env/index','filtration_env')">
							  <md-icon md-svg-src="assets/icons/svg/down.svg" style="color: greenyellow;"></md-icon>
							</md-button-->
						</legend>
						<div flex>
							<table ng-table="tableFiltration_env" id="tableFiltration_env" class="dataTable row-border hover" datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
								<thead>
									<tr>
										<th class="secondary-text" ng-repeat="c in ::vm.filtration_env_column">
											<div class="table-header">
												<span class="column-title">{{c.titre}}</span>
											</div>
										</th>
									</tr>
								</thead>
								<tbody>
									<tr ng-repeat="filt_env in vm.allFiltration_env"  ng-class="{selected: filt_env.$selected}" ng-click="vm.selectionFiltration_env(filt_env)">                                      
										
										<!--td style="width:15% !important;">
											<span ng-if="filt_env.$edit">
												<md-input-container style="width:100% !important;">
													<label>Nature sous projet</label>
													<input name="nature_sous_projet" type="text" ng-model="filt_env.nature_sous_projet"/>
												</md-input-container>   
											</span>
											<span ng-if="!filt_env.$edit">{{filt_env.nature_sous_projet}}</span>
										</td-->
										<td style="width:35% !important;">
											<span ng-if="filt_env.$edit">
												<md-input-container style="width:100% !important;">
													<label>Secretariat</label>
													<input name="secretariat" type="text" ng-model="filt_env.secretariat"/>
												</md-input-container>   
											</span>
											<span ng-if="!filt_env.$edit">{{filt_env.secretariat}}</span>
										</td>
										<!--td style="width:35% !important;">
											<span ng-if="filt_env.$edit">
												<md-input-container style="width:100% !important;">
													<label>Intitule sous projet</label>
													<input name="intitule_sous_projet" type="text" ng-model="filt_env.intitule_sous_projet"/>
												</md-input-container>   
											</span>
											<span ng-if="!filt_env.$edit">{{filt_env.intitule_sous_projet}}</span>
										</td>
										<td style="width:35% !important;">
											<span ng-if="filt_env.$edit">
												<md-input-container style="width:100% !important;">
													<label>Type sous projet</label>
													<input name="type_sous_projet" type="text" ng-model="filt_env.type_sous_projet"/>
												</md-input-container>   
											</span>
											<span ng-if="!filt_env.$edit">{{filt_env.type_sous_projet}}</span>
										</td>
										<td style="width:35% !important;">
											<span ng-if="filt_env.$edit">
												<md-input-container style="width:100% !important;">
													<label>Localisation</label>
													<input name="localisation" type="text" ng-model="filt_env.localisation"/>
												</md-input-container>   
											</span>
											<span ng-if="!filt_env.$edit">{{filt_env.localisation}}</span>
										</td>
										<td style="width:35% !important;">
											<span ng-if="filt_env.$edit">
												<md-input-container style="width:100% !important;">
													<label>Objectif sous projet</label>
													<input name="objectif_sous_projet" type="text" ng-model="filt_env.objectif_sous_projet"/>
												</md-input-container>   
											</span>
											<span ng-if="!filt_env.$edit">{{filt_env.objectif_sous_projet}}</span>
										</td>
										<td style="width:35% !important;">
											<span ng-if="filt_env.$edit">
												<md-input-container style="width:100% !important;">
													<label>Activite sous projet</label>
													<input name="activite_sous_projet" type="text" ng-model="filt_env.activite_sous_projet"/>
												</md-input-container>   
											</span>
											<span ng-if="!filt_env.$edit">{{filt_env.activite_sous_projet}}</span>
										</td-->
										<td style="width:35% !important;">
											<span ng-if="filt_env.$edit">
												<md-input-container style="width:100% !important;">
													<label>Coût estimé sous projet</label>
													<input name="cout_estime_sous_projet" type="number" ng-model="filt_env.cout_estime_sous_projet"/>
												</md-input-container>   
											</span>
											<span ng-if="!filt_env.$edit">{{filt_env.cout_estime_sous_projet}}</span>
										</td>
										<td style="width:35% !important;">
											<span ng-if="filt_env.$edit">
												<md-input-container style="width:100% !important;">
													<label>Envergure sous projet</label>
													<input name="envergure_sous_projet" type="text" ng-model="filt_env.envergure_sous_projet"/>
												</md-input-container>   
											</span>
											<span ng-if="!filt_env.$edit">{{filt_env.envergure_sous_projet}}</span>
										</td>
										<td style="width:35% !important;">
											<span ng-if="filt_env.$edit">
												<md-input-container style="width:100% !important;">
													<label>Ouvrage prevu</label>
													<input name="ouvrage_prevu" type="text" ng-model="filt_env.ouvrage_prevu"/>
												</md-input-container>   
											</span>
											<span ng-if="!filt_env.$edit">{{filt_env.ouvrage_prevu}}</span>
										</td>
										<!--td style="width:35% !important;">
											<span ng-if="filt_env.$edit">
												<md-input-container style="width:100% !important;">
													<label>Description sous projet</label>
													<input name="description_sous_projet" type="text" ng-model="filt_env.description_sous_projet"/>
												</md-input-container>   
											</span>
											<span ng-if="!filt_env.$edit">{{filt_env.description_sous_projet}}</span>
										</td-->
										<td style="width:35% !important;">
											<span ng-if="filt_env.$edit">
												<md-input-container style="width:100% !important;">
													<label>Environnement naturel</label>
													<input name="environnement_naturel" type="text" ng-model="filt_env.environnement_naturel"/>
												</md-input-container>   
											</span>
											<span ng-if="!filt_env.$edit">{{filt_env.environnement_naturel}}</span>
										</td>
										<td style="width:35% !important;">
											<span ng-if="filt_env.$edit">																						
												<md-datepicker ng-model="filt_env.date_visa_rt_ibd" md-placeholder="Date visa RT IBD">                       
												</md-datepicker>   
											</span>
											<span ng-if="!filt_env.$edit">{{vm.formatDate(filt_env.date_visa_rt_ibd)}}</span>
										</td>
										<td style="width:35% !important;">
											<span ng-if="filt_env.$edit">											
												<md-datepicker ng-model="filt_env.date_visa_res" md-placeholder="Date visa RES">                       
												</md-datepicker>   
											</span>
											<span ng-if="!filt_env.$edit">{{vm.formatDate(filt_env.date_visa_res)}}</span>
										</td>
										<td style="width:15% !important;">
											<a ng-if="!filt_env.$edit" ng-click="vm.modifierFiltration_env(filt_env)" title="Modifier">
												<span class="icon-table-edit"></span>
											</a>
											<a ng-if="!filt_env.$edit" ng-click="vm.supprimerFiltration_env(filt_env)" title="Supprimer">
												<span class="icon-delete"></span>
											</a>
											<a ng-if="filt_env.$edit" ng-click="vm.annulerFiltration_env(filt_env)" title="Annuler modification">
												<span class="icon-cancel"></span>
											</a>
											<a ng-if="filt_env.$edit && filt_env.secretariat && filt_env.cout_estime_sous_projet && filt_env.envergure_sous_projet && filt_env.ouvrage_prevu && filt_env.environnement_naturel && filt_env.date_visa_rt_ibd && filt_env.date_visa_res" ng-click="vm.ajoutFiltration_env(filt_env,0)" title="Sauvegarder">
												<span class="icon-content-save"></span>
											</a>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
						
					</fieldset>
						
				</div>
				</md-tab-body>
			</md-tab>			
			<md-tab label="Aspects et problèmes environnementaux " ng-click="vm.click_Aspetsetproblemes_env()" ng-disabled="!vm.detail_sousprojet || vm.type_sous_projet!='IDB'">
				<md-tab-body><br>
					<div class="form-wrapper md-whiteframe-1dp" >
						<kendo-grid options="vm.mainGridOptionsAspects_env">
                            <div k-detail-template>
                                <kendo-grid k-options="vm.allproblemes_env({{dataItem.id}})">
                                </kendo-grid>
                            </div>
						</kendo-grid>
					</div>
				</md-tab-body>
			</md-tab>
			
			
			<md-tab label="Fiche environnementale " ng-click="vm.click_fiche_env()" ng-disabled="!vm.detail_sousprojet || vm.type_sous_projet!='IDB'">
				<md-tab-body>
					<div style="overflow: auto; width: 100%;">
					<fieldset layout="row" layout-gt-xs="row" >
						<legend>
								Entête fiche environnementale
							<md-button class="md-fab md-mini " aria-label="Use Android" ng-if="vm.serveur_central" ng-click="vm.ajouterFiche_env()">
							  <md-icon md-svg-src="assets/icons/svg/add.svg" style="color: greenyellow;"></md-icon>
							</md-button>

							<md-button class="md-fab md-mini " aria-label="Use Android" ng-if="!vm.serveur_central" ng-click="vm.download_ddb_general('fiche_env/index','fiche_env')">
							  <md-icon md-svg-src="assets/icons/svg/down.svg" style="color: greenyellow;"></md-icon>
							</md-button>
						</legend>
						<table ng-table="tableFiche_env" id="tableFiche_env" class="dataTable row-border hover" datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
							<thead>
								<tr>
									<th class="secondary-text" ng-repeat="c in ::vm.fiche_env_column">
										<div class="table-header">
											<span class="column-title">{{c.titre}}</span>
										</div>
									</th>
								</tr>
							</thead>
							<tbody>
								<tr ng-repeat="fic_env in vm.allFiche_env"  ng-class="{selected: fic_env.$selected}" ng-click="vm.selectionFiche_env(fic_env)">                                      
									
									<!--td style="width:15% !important;">
										<span ng-if="fic_env.$edit">
											<md-input-container style="width:100% !important; display: flex !important;">
												<label>Intitule sous projet</label>
												<input name="intitule_sousprojet" type="text" ng-model="fic_env.intitule_sousprojet"/>
											</md-input-container>   
										</span>
										<span ng-if="!fic_env.$edit">{{fic_env.intitule_sousprojet}}</span>
									</td-->
									<td style="width:35% !important;">
										<span ng-if="fic_env.$edit">
											<md-input-container style="width:100% !important; display: flex !important;">
												<label>Bureau d'étude</label>
												<input name="bureau_etude" type="text" ng-model="fic_env.bureau_etude"/>
											</md-input-container>   
										</span>
										<span ng-if="!fic_env.$edit">{{fic_env.bureau_etude}}</span>
									</td>
									<td style="width:35% !important;">
										<span ng-if="fic_env.$edit">
											<md-input-container style="width:100% !important; display: flex !important;">
												<label>Référence contrat</label>
												<input name="ref_contrat" type="text" ng-model="fic_env.ref_contrat"/>
											</md-input-container>   
										</span>
										<span ng-if="!fic_env.$edit">{{fic_env.ref_contrat}}</span>
									</td>
									<!--td style="width:100% !important;">
										<span ng-if="fic_env.$edit">
											<md-input-container style="width:100%; display: flex !important;">
											  <label>Ile</label>
												<md-select ng-model="fic_env.id_ile"  style="width:90px;overflow: hidden;text-overflow: ellipsis;" ng-change="vm.modifierIle(fic_env)">
												
												  <md-option ng-repeat="ile in vm.allIle" value="{{ile.id}}">
													{{ile.Ile}}
												  </md-option>
												</md-select>
											</md-input-container>    
										</span>
										<span ng-if="!fic_env.$edit">{{fic_env.ile.Ile}}</span>
									</td>
									<td style="width:100% !important;">
										<span ng-if="fic_env.$edit">
											<md-input-container style="width:100%; display: flex !important;">
											  <label>Region</label>
												<md-select ng-model="fic_env.id_region"  style="width:90px;overflow: hidden;text-overflow: ellipsis;" ng-change="vm.modifierRegion(fic_env)" ng-disabled="!fic_env.id_ile">
												
												  <md-option ng-repeat="reg in vm.allRegion" value="{{reg.id}}">
													{{reg.Region}}
												  </md-option>
												</md-select>
											</md-input-container>    
										</span>
										<span ng-if="!fic_env.$edit">{{fic_env.region.Region}}</span>
									</td>
									<td style="width:100% !important;">
										<span ng-if="fic_env.$edit">
											<md-input-container style="width:100%; display: flex !important;">
											  <label>Commune</label>
												<md-select ng-model="fic_env.id_commune"  style="width:90px;overflow: hidden;text-overflow: ellipsis;" ng-disabled="!fic_env.id_region">
												
												  <md-option ng-repeat="com in vm.allCommune" value="{{com.id}}">
													{{com.Commune}}
												  </md-option>
												</md-select>
											</md-input-container>    
										</span>
										<span ng-if="!fic_env.$edit">{{fic_env.commune.Commune}}</span>
									</td-->
									<td style="width:35% !important;">
										<span ng-if="fic_env.$edit">
											<md-input-container style="width:100% !important; display: flex !important;">
												<label>Composante sous projet</label>
												<input name="composante_sousprojet" type="text" ng-model="fic_env.composante_sousprojet"/>
											</md-input-container>   
										</span>
										<span ng-if="!fic_env.$edit">{{fic_env.composante_sousprojet}}</span>
									</td>
									<!--td style="width:35% !important;">
										<span ng-if="fic_env.$edit">
											<md-input-container style="width:100% !important; display: flex !important;">
												<label>Localisation sous projet</label>
												<input name="localisation_sousprojet" type="text" ng-model="fic_env.localisation_sousprojet"/>
											</md-input-container>   
										</span>
										<span ng-if="!fic_env.$edit">{{fic_env.localisation_sousprojet}}</span>
									</td>
									<td style="width:35% !important;">
										<span ng-if="fic_env.$edit">
											<md-input-container style="width:100% !important; display: flex !important;">
												<label>Localisation géographique</label>
												<input name="localisation_geo" type="text" ng-model="fic_env.localisation_geo"/>
											</md-input-container>   
										</span>
										<span ng-if="!fic_env.$edit">{{fic_env.localisation_geo}}</span>
									</td-->
									<td style="width:35% !important;">
										<span ng-if="fic_env.$edit">
											<md-input-container style="width:100% !important; display: flex !important;">
												<label>Composante zone susceptible</label>
												<input name="composante_zone_susce" type="text" ng-model="fic_env.composante_zone_susce"/>
											</md-input-container>   
										</span>
										<span ng-if="!fic_env.$edit">{{fic_env.composante_zone_susce}}</span>
									</td>
									<td style="width:35% !important;">
										<span ng-if="fic_env.$edit">
											<md-input-container style="width:100% !important; display: flex !important;">
												<label>Problèmes environnementaux</label>
												<input name="probleme_env" type="text" ng-model="fic_env.probleme_env"/>
											</md-input-container>   
										</span>
										<span ng-if="!fic_env.$edit">{{fic_env.probleme_env}}</span>
									</td>
									<td style="width:35% !important;">
										<span ng-if="fic_env.$edit">
											<md-input-container style="width:100% !important; display: flex !important;">
												<label>Mésures envisagées</label>
												<input name="mesure_envisage" type="text" ng-model="fic_env.mesure_envisage"/>
											</md-input-container>   
										</span>
										<span ng-if="!fic_env.$edit">{{fic_env.mesure_envisage}}</span>
									</td>
									<td style="width:35% !important;">
										<span ng-if="fic_env.$edit">
											<md-input-container style="width:100% !important; display: flex !important;">
												<label>Justification classement</label>
												<input name="justification_classe_env" type="text" ng-model="fic_env.justification_classe_env"/>
											</md-input-container>   
										</span>
										<span ng-if="!fic_env.$edit">{{fic_env.justification_classe_env}}</span>
									</td>
									<td style="width:35% !important;">
										<span ng-if="fic_env.$edit">
											<md-input-container style="width:100% !important; display: flex !important;">
												<label>Observation</label>
												<input name="Observation et remarque" type="text" ng-model="fic_env.observation"/>
											</md-input-container>   
										</span>
										<span ng-if="!fic_env.$edit">{{fic_env.observation}}</span>
									</td>
									<td style="width:35% !important;">
										<span ng-if="fic_env.$edit">																						
											<md-datepicker ng-model="fic_env.date_visa_rt" md-placeholder="Date visa RT IBD">                       
											</md-datepicker>   
										</span>
										<span ng-if="!fic_env.$edit">{{vm.formatDate(fic_env.date_visa_rt)}}</span>
									</td>
									<td style="width:35% !important;">
										<span ng-if="fic_env.$edit">											
											<md-datepicker ng-model="fic_env.date_visa_ugp" md-placeholder="Date visa UGP">                       
											</md-datepicker>   
										</span>
										<span ng-if="!fic_env.$edit">{{vm.formatDate(fic_env.date_visa_ugp)}}</span>
									</td>
									<td style="width:35% !important;">
										<span ng-if="fic_env.$edit">											
											<md-datepicker ng-model="fic_env.date_visa_be" md-placeholder="Date visa BE">                       
											</md-datepicker>   
										</span>
										<span ng-if="!fic_env.$edit">{{vm.formatDate(fic_env.date_visa_be)}}</span>
									</td>
									<td style="width:15% !important;">
										<a ng-if="!fic_env.$edit" ng-click="vm.modifierFiche_env(fic_env)" title="Modifier">
											<span class="icon-table-edit"></span>
										</a>
										<a ng-if="!fic_env.$edit" ng-click="vm.supprimerFiche_env(fic_env)" title="Supprimer">
											<span class="icon-delete"></span>
										</a>
										<a ng-if="fic_env.$edit" ng-click="vm.annulerFiche_env(fic_env)" title="Annuler modification">
											<span class="icon-cancel"></span>
										</a>
										<a ng-if="fic_env.$edit && fic_env.bureau_etude && fic_env.ref_contrat && fic_env.composante_sousprojet 
										&& fic_env.composante_zone_susce && fic_env.probleme_env && fic_env.mesure_envisage 
										&& fic_env.justification_classe_env && fic_env.observation && fic_env.date_visa_rt && fic_env.date_visa_ugp && fic_env.date_visa_be" ng-click="vm.ajoutFiche_env(fic_env,0)" title="Sauvegarder">
											<span class="icon-content-save"></span>
										</a>
									</td>
								</tr>
							</tbody>
						</table>
					</fieldset>
						
				</div><br>
					<div style="overflow: auto; width: 100%;">
					<fieldset layout="row" layout-gt-xs="row" >
						<legend>
								Plan de gestion environnementale
							<md-button class="md-fab md-mini " aria-label="Use Android" ng-if="vm.serveur_central && vm.show_botton_ajout_fiche" ng-click="vm.ajouterPlan_gestion_env()">
							  <md-icon md-svg-src="assets/icons/svg/add.svg" style="color: greenyellow;"></md-icon>
							</md-button>

							<md-button class="md-fab md-mini " aria-label="Use Android" ng-if="!vm.serveur_central && vm.show_botton_ajout_fiche" ng-click="vm.download_ddb_general('plan_gestion_env/index','plan_gestion_env')">
							  <md-icon md-svg-src="assets/icons/svg/down.svg" style="color: greenyellow;"></md-icon>
							</md-button>
						</legend>
						<div flex>
							<table ng-table="tablePlan_gestion_env" id="tablePlan_gestion_env" class="dataTable row-border hover" datatable="ng" dt-options="vm.dtOptions" ms-responsive-table>
								<thead>
									<tr>
										<th class="secondary-text" ng-repeat="c in ::vm.plan_gestion_env_column">
											<div class="table-header">
												<span class="column-title">{{c.titre}}</span>
											</div>
										</th>
									</tr>
								</thead>
								<tbody>
									<tr ng-repeat="fic_env in vm.allPlan_gestion_env"  ng-class="{selected: fic_env.$selected}" ng-click="vm.selectionPlan_gestion_env(fic_env)">                                      
										
										<td style="width:15% !important;">
											<span ng-if="fic_env.$edit">
												<md-input-container style="width:100% !important; display: flex !important;">
													<label>Impacts</label>
													<input name="impacts" type="text" ng-model="fic_env.impacts"/>
												</md-input-container>   
											</span>
											<span ng-if="!fic_env.$edit">{{fic_env.impacts}}</span>
										</td>
										<td style="width:35% !important;">
											<span ng-if="fic_env.$edit">
												<md-input-container style="width:100% !important; display: flex !important;">
													<label>Mesures</label>
													<input name="mesures" type="text" ng-model="fic_env.mesures"/>
												</md-input-container>   
											</span>
											<span ng-if="!fic_env.$edit">{{fic_env.mesures}}</span>
										</td>
										<td style="width:35% !important;">
											<span ng-if="fic_env.$edit">
												<md-input-container style="width:100% !important; display: flex !important;">
													<label>Responsable</label>
													<input name="responsable" type="text" ng-model="fic_env.responsable"/>
												</md-input-container>   
											</span>
											<span ng-if="!fic_env.$edit">{{fic_env.responsable}}</span>
										</td>
										<td style="width:35% !important;">
											<span ng-if="fic_env.$edit">
												<md-input-container style="width:100% !important; display: flex !important;">
													<label>Calendrier d'execution</label>
													<input name="calendrier_execution" type="text" ng-model="fic_env.calendrier_execution"/>
												</md-input-container>   
											</span>
											<span ng-if="!fic_env.$edit">{{fic_env.calendrier_execution}}</span>
										</td>
										<td style="width:35% !important;">
											<span ng-if="fic_env.$edit">
												<md-input-container style="width:100% !important; display: flex !important;">
													<label>Coût estimatif</label>
													<input name="cout_estimatif" type="number" ng-model="fic_env.cout_estimatif"/>
												</md-input-container>   
											</span>
											<span ng-if="!fic_env.$edit">{{fic_env.cout_estimatif}}</span>
										</td>
										<td style="width:15% !important;">
											<a ng-if="!fic_env.$edit" ng-click="vm.modifierPlan_gestion_env(fic_env)" title="Modifier">
												<span class="icon-table-edit"></span>
											</a>
											<a ng-if="!fic_env.$edit" ng-click="vm.supprimerPlan_gestion_env(fic_env)" title="Supprimer">
												<span class="icon-delete"></span>
											</a>
											<a ng-if="fic_env.$edit" ng-click="vm.annulerPlan_gestion_env(fic_env)" title="Annuler modification">
												<span class="icon-cancel"></span>
											</a>
											<a ng-if="fic_env.$edit && fic_env.impacts && fic_env.mesures && fic_env.responsable && fic_env.calendrier_execution 
											&& fic_env.cout_estimatif" ng-click="vm.ajoutPlan_gestion_env(fic_env,0)" title="Sauvegarder">
												<span class="icon-content-save"></span>
											</a>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
						
					</fieldset>
						
				</div>
				</md-tab-body>
			</md-tab>
						
			<md-tab label="Etude environnementaux " ng-click="vm.click_Etude_env()" ng-disabled="!vm.detail_sousprojet || vm.type_sous_projet!='IDB'">
				<md-tab-body><br>
					<div class="form-wrapper md-whiteframe-1dp" >
						<kendo-grid options="vm.mainGridOptionsEtude_env">
                            <div k-detail-template>
								<kendo-tabstrip>
									<ul>
									  <li>Tableau d'impacts</li>
									  <li>Tableau de mesure</li>
									</ul>
									
									<div>
										<kendo-grid k-options="vm.alltableau_impacts({{dataItem.id}})">
										</kendo-grid>
									</div>
									<div>
										<div kendo-grid k-options="vm.alltableau_mesure_pges({{dataItem.id}})">
										</div>
									</div>
								</kendo-tabstrip>
                            </div>
						</kendo-grid>
					</div>
				</md-tab-body>
			</md-tab>
						
			<md-tab label="Convention IDB" ng-click="vm.click_Convention_idb()" ng-disabled="!vm.detail_sousprojet || vm.type_sous_projet!='IDB'">
				<md-tab-body><br>
					<div class="form-wrapper md-whiteframe-1dp" >
						<kendo-grid options="vm.mainGridOptionsConvention_idb">
						</kendo-grid>
					</div>
				</md-tab-body>
			</md-tab>
						
			<md-tab label="Convention MOD" ng-click="vm.click_Convention_mod()" ng-disabled="!vm.detail_sousprojet || vm.type_sous_projet!='IDB'">
				<md-tab-body><br>
					<div class="form-wrapper md-whiteframe-1dp" >
						<kendo-grid options="vm.mainGridOptionsConvention_mod">
						</kendo-grid>
					</div>
				</md-tab-body>
			</md-tab>
						
			<md-tab label="Convention entretien" ng-click="vm.click_Convention_entretien()" ng-disabled="!vm.detail_sousprojet || vm.type_sous_projet!='IDB'">
				<md-tab-body><br>
					<div class="form-wrapper md-whiteframe-1dp" >
						<kendo-grid options="vm.mainGridOptionsConvention_entretien">
						</kendo-grid>
					</div>
				</md-tab-body>
			</md-tab>
			<md-tab>
			</md-tab>
		</md-tabs>
	</div>
    </div>
    <!-- CONTENT -->
</div>